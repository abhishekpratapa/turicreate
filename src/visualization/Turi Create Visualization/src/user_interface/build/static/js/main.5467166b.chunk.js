(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(24).concat([function(e,t,a){e.exports={imgSize:"90",imgMargin:"17",ImageContainer:"ImageContainer_ImageContainer__1eeKe",ImageContainerSourceSelected:"ImageContainer_ImageContainerSourceSelected__16Uc5",selected:"ImageContainer_selected__Hr8Au",realImage:"ImageContainer_realImage__1xpNg",ImageContainerSource:"ImageContainer_ImageContainerSource__UdUuP",ImageLabel:"ImageContainer_ImageLabel__NEU6k",LoadingContainer:"ImageContainer_LoadingContainer__2OZm1",bouncer:"ImageContainer_bouncer__2spSS","sk-bouncedelay":"ImageContainer_sk-bouncedelay__16q3C",bounce1:"ImageContainer_bounce1__3WgxR",bounce2:"ImageContainer_bounce2__SCuGj"}},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={ImageLabeler:"ImageLabeler_ImageLabeler__pPq8q",Image:"ImageLabeler_Image__2BJdc",ImageShadow:"ImageLabeler_ImageShadow__2emr5",ImageLoadingHolder:"ImageLabeler_ImageLoadingHolder__3hDNu",ImageSrc:"ImageLabeler_ImageSrc__2mgRU","sk-bouncedelay":"ImageLabeler_sk-bouncedelay__2pq--",ImageContainer:"ImageLabeler_ImageContainer__312vS",bounce1:"ImageLabeler_bounce1__2otYl",bounce2:"ImageLabeler_bounce2__3Bfi1"}},,,,function(e,t,a){e.exports={LabelModal:"LabelModal_LabelModal__fBPPt",modalWindow:"LabelModal_modalWindow__ojuGT",modalWindowHeader:"LabelModal_modalWindowHeader__zG89h",modalWindowDescription:"LabelModal_modalWindowDescription__2C-kZ",modalInput:"LabelModal_modalInput__3T47e",errorMessage:"LabelModal_errorMessage__2H40u",cancelButton:"LabelModal_cancelButton__2Rzlr",buttonContainer:"LabelModal_buttonContainer__UNHW_",createButton:"LabelModal_createButton__2bQg5"}},,,,,,function(e,t,a){e.exports={Label:"Labels_Label__2y4_x",LabelSpacer:"Labels_LabelSpacer__1D9Wy",LabelNameAmount:"Labels_LabelNameAmount__K6RcK",LabelSelected:"Labels_LabelSelected__1kWvg",LabelName:"Labels_LabelName__KpOmy",LabelAnnotatedAmount:"Labels_LabelAnnotatedAmount__KxNpE",LabelApplyButton:"Labels_LabelApplyButton__3i1xq"}},,,,,,,function(e,t,a){e.exports={LabelContainer:"LabelContainer_LabelContainer__2JB7g",LabelHeader:"LabelContainer_LabelHeader__2M1bj",LabelAddLabel:"LabelContainer_LabelAddLabel__xzawj",LabelAddLabelContainer:"LabelContainer_LabelAddLabelContainer__k8I2A"}},,,function(e){e.exports={options:{optimize_for:"LITE_RUNTIME"},nested:{TuriCreate:{nested:{Annotation:{nested:{Specification:{nested:{Parcel:{oneofs:{Message:{oneof:["annotations","data","metadata"]}},fields:{annotations:{type:"Annotations",id:1},data:{type:"Data",id:2},metadata:{type:"MetaData",id:3}}},ClientRequest:{oneofs:{Type:{oneof:["getter","annotations"]}},fields:{getter:{type:"DataGetter",id:1},annotations:{type:"Annotations",id:2}}},ActivityClassificationLabel:{fields:{start:{type:"double",id:6},stop:{type:"double",id:7}}},AudioClassificationLabel:{fields:{start:{type:"double",id:6},stop:{type:"double",id:7}}},DrawingClassificationLabel:{fields:{}},ImageClassificationLabel:{fields:{}},ObjectDetectionLabel:{fields:{height:{type:"double",id:1},width:{type:"double",id:2},x:{type:"double",id:4},y:{type:"double",id:5}}},Label:{oneofs:{labelIdentifier:{oneof:["intLabel","stringLabel"]},labelType:{oneof:["activityClassificationLabel","audioClassificationLabel","drawingClassificationLabel","imageClassificationLabel","objectDetectionLabel"]}},fields:{intLabel:{type:"int64",id:1},stringLabel:{type:"string",id:2},activityClassificationLabel:{type:"ActivityClassificationLabel",id:100},audioClassificationLabel:{type:"AudioClassificationLabel",id:200},drawingClassificationLabel:{type:"DrawingClassificationLabel",id:300},imageClassificationLabel:{type:"ImageClassificationLabel",id:400},objectDetectionLabel:{type:"ObjectDetectionLabel",id:500}}},Annotation:{fields:{labels:{rule:"repeated",type:"Label",id:1},rowIndex:{rule:"repeated",type:"int64",id:2}}},Annotations:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}}},ImageDatum:{fields:{width:{type:"int32",id:1},height:{type:"int32",id:2},channels:{type:"int32",id:3},type:{type:"Format",id:4},imgData:{type:"string",id:10}},nested:{Format:{values:{JPG:0,PNG:1,RAW_ARRAY:2,UNDEFINED:3}}}},TextDatum:{fields:{text:{type:"string",id:1}}},Datum:{fields:{rowIndex:{type:"int64",id:1},images:{rule:"repeated",type:"ImageDatum",id:10},text:{rule:"repeated",type:"TextDatum",id:20}}},DataGetter:{fields:{type:{type:"GetterType",id:1},start:{type:"int32",id:2},end:{type:"int32",id:3}},nested:{GetterType:{values:{DATA:0,ANNOTATIONS:1}}}},Data:{fields:{data:{rule:"repeated",type:"Datum",id:1}}},MetaLabel:{oneofs:{Label:{oneof:["stringLabel","intLabel"]}},fields:{stringLabel:{type:"string",id:1},intLabel:{type:"int64",id:2},elementCount:{type:"int64",id:3}}},ActivityClassificationMeta:{fields:{label:{rule:"repeated",type:"MetaLabel",id:1}}},AudioClassificationMeta:{fields:{label:{rule:"repeated",type:"MetaLabel",id:1}}},DrawingClassificationMeta:{fields:{label:{rule:"repeated",type:"MetaLabel",id:1}}},ImageClassificationMeta:{fields:{label:{rule:"repeated",type:"MetaLabel",id:1}}},ObjectDetectionMeta:{fields:{label:{rule:"repeated",type:"MetaLabel",id:1}}},MetaData:{oneofs:{Type:{oneof:["activityClassification","audioClassification","drawingClassification","imageClassification","objectDetection"]}},fields:{numExamples:{type:"int64",id:1},type:{type:"AnnotationType",id:2},activityClassification:{type:"ActivityClassificationMeta",id:100},audioClassification:{type:"AudioClassificationMeta",id:101},drawingClassification:{type:"DrawingClassificationMeta",id:102},imageClassification:{type:"ImageClassificationMeta",id:103},objectDetection:{type:"ObjectDetectionMeta",id:104}},nested:{AnnotationType:{values:{ACTIVITY_CLASSIFICATION:0,AUDIO_CLASSIFICATION:1,DRAWING_CLASSIFICATION:2,IMAGE_CLASSIFICATION:3,OBJECT_DETECTION:4}}}}}}}}}}}}},,function(e,t,a){e.exports={StatusBar:"StatusBar_StatusBar__3Wqje",SwapButton:"StatusBar_SwapButton__3Ry9N",SwapButtonHelperText:"StatusBar_SwapButtonHelperText__Mi4Gx"}},function(e,t,a){e.exports={ToggleButton:"ToggleButton_ToggleButton__MNX1r",turnOffBackground:"ToggleButton_turnOffBackground__uvv6a",ToggleButtonOn:"ToggleButton_ToggleButtonOn__3ARsD",turnOnBackground:"ToggleButton_turnOnBackground__26q0R",ToggleButtonNib:"ToggleButton_ToggleButtonNib__19-gi",turnOffNib:"ToggleButton_turnOffNib__1RTAH",Toggled:"ToggleButton_Toggled__2x-kA",turnOnNib:"ToggleButton_turnOnNib__3QTPr"}},function(e,t,a){e.exports={SingleImage:"SingleImage_SingleImage__1etT2",SingleImageContainer:"SingleImage_SingleImageContainer__1yOiT",RightArrow:"SingleImage_RightArrow__3Bhms",LeftArrow:"SingleImage_LeftArrow__ugJdQ"}},function(e,t,a){e.exports={ErrorBar:"ErrorBar_ErrorBar__2dq3m",ErrorMessage:"ErrorBar_ErrorMessage__1h4NA",ErrorIcon:"ErrorBar_ErrorIcon__M4UYP",ErrorClose:"ErrorBar_ErrorClose__1PqMG"}},,,,,,function(e,t,a){e.exports={imageNumber:"NavigationBar_imageNumber__368mr",jumpToImageContainer:"NavigationBar_jumpToImageContainer__3lNHb",BottomBar:"NavigationBar_BottomBar__1KFAL"}},,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/caret-down.ed2cbc77.svg"},function(e,t,a){e.exports=a.p+"static/media/cancel.b73df5f8.svg"},function(e,t,a){e.exports=a.p+"static/media/caret-down.ed2cbc77.svg"},function(e,t,a){e.exports={Annotate:"Annotate_Annotate__2RByF"}},function(e,t,a){e.exports={InfiniteScroll:"InfiniteScroll_InfiniteScroll__aoF4O",noselect:"InfiniteScroll_noselect__2AZ6h"}},,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/filter.6be96c8e.svg"},function(e,t,a){e.exports=a.p+"static/media/carret.d006a3ae.svg"},function(e,t,a){e.exports=a.p+"static/media/info.eb907d77.svg"},function(e,t,a){e.exports=a.p+"static/media/warning.1a77a1d2.svg"},function(e,t,a){e.exports=a.p+"static/media/down.02e4572e.svg"},function(e,t,a){e.exports=a.p+"static/media/down.2104bcc9.svg"},function(e,t,a){e.exports=a.p+"static/media/down.02e4572e.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABQCAYAAACdxrJZAAAAAXNSR0IArs4c6QAACEZJREFUeAHtnOtvFFUYh2kLglguWkQFIyARL4AYFYOXIN6jIWrUEjAYjUZJMHzwk1/4GyQxxlijCX5DRRHFGFCxgIhiVPCCgje8IyAgeCmlUJ+n7KztdttOpzO703be5MmZnT0z5z2/vuc9Z5YzDBiQWaZAb1agojc7H9b3RYsWDa6pqTlt4MCBFYsXL/4h7HVx1OsXAjc3Nw9HrOthBiyHLRUVFY2UidvAxFtIRwMG0plwP5wDLyD6O4i8i+NErb8IHIh4Mge3wESYisgrKLcmGc39TeBmBD0BpoARfS68iND1SUVzfxMYPVvMlGE0zwZTxgWI/ArlZwh9hDI2668CBwIG0TyGE+fB8lw07w4q9LTsLwKbGo51IJbRXAO3gtE8ORfNn8cRzX1eYMSyj6PhdOhsWTqY76fBWAhy8zpE3svnyNZZg21uiqNVnJDQ17S5QXwfgvYb6XzRqMTXSpo7BRz2k+EicA2sgMH1HHZoh/nmc3g1h7n5aIe1O/mi08Zw1Bw1HnT0DBgKnV7D90lZ0O7fNPAxtHtYyEWr+fQSmJ5D341g+9IdM60YvWvhedgQJZoDp7n+f8tFwGmcuQGug6kwChS4XGa07oHXwA4bVU2UA/DXkWUAXA6zwGidBNXQUwui2TWzbX/RnWhuJ3BO3Anc6B6YAzpqB8ppPtZuh2XwEnxNJ4/hq/6PBIW9Ca4G8+cQiNOCP+7b3PQFMJr3hWmgmMAm+QdhATgxlNv+xYHN8Cy8QcdaJh3Edcj7x58NrgAuhJMgSWvg5lvB3LwSvuoqmtusInBaB2fCvZAGcc236+BJWEtnFNuUMJzCaJ0L10KpfHVkmNvHg7ndp8B38Ws/x11aJZUngRelwQ7hxMtwDQzSe0p9HAsLYRMchnLZvzSsD4/ChXV1dS0+Fqqcj+Da2trBfDkRzGfFzGXKIbBM2hyKH8ISeM9hSCf0Vf/mw7zcMUXZzGi+DFy1DKuqqnqMch+0sbzAnB0BThCuHgpNYTeAw/UwtMvdnIvTTAWuQ9/PiWt0nA8PwV1QzEdOl9Rcxv0JW2DHUaxY64UCj6NS63PBNT9z8BSshpalUfBFUiXCOnObFhR3MjwMiuuqodxmkO2AVeBkt3XBggWOunaWF/MEjG+HtatBHzl3ALbTaZdLJbNcWnCloLi14Cgrp/lHdxXjSH7ZEk1+o+zQ8gJ3WOO4wH6t0CUzxPVx9yx4EIzccotrhH4BLtF84Aj1Y1AYgblXiyWdd4N2gvJUDu6GuVDOtGDU7oK3YAVsJGr3UIay7ggc6oZxVCJ6TVU3wn3QnQnN+UEcbWJQOBLsZxV01/7hgk/APPs6mCaLTmZ8V9RSJ3BuUpuGtw/AxKJeHxfPzhtJv8NucJ74G1yBOAlpiuvccjK4CpkOYUaiIv4Ca8BH800I64qh25Y6genBGDAtzCjSGwXcCdvgG/ganGQU+CAouv/ko0AO7SB6R3E8By6BriL5L+p8AEatqyZ/94g8/6RKYKLXX7+uhtthMASmeJ/B+2Dnv4Kf4CCdV8hOjfs2UKHlN4xOKppadoKiGrUfcm/F7pGlRmBEMNomgJHmD06aQ3072Om3YAvsiRBRQS7m8qLm8N8ELr3e5P47KWOx1AhMb4bDLLgKNHNqkAPX02ln8ritkRuaapzAXH59RDvm8NgsFQITvUbYOLgNFNq8uhyWwqd02uEbp5lT98F6MGr9pe5XytgtFQLTK3PvpTmcvZ+DpXTa6IrTTEOmnS/BhwXpFzt7XOveAE5Gy+BpxP2RMi5zhBi1rjbWgg8M62jDz4la2SOY9OA6dRK49jXn1sUsLrdsefhwSfc4rIJttBF32uG27a3sAuPSCHB96kxu5MadFrhty8PHZsrN3N/cWzJLg8A19NYJzoW9IsRuiOqDR15YRo39HsL5Hq9zu3I2DQL7ELEOPqDDLpsSM4T1Ke4s8JF5P7wJiVoaBPa3BJdKsa4/C1VDXFcqPn77lHgxONH1fYFzw9ffGBIxhB3EjU1BN8OdYL43NbhkS9zSEMGJdRJxnUCvhDvgOhgPmgK7bEvc+qzAiGuEToBHQJFPhJJbSYZJyXt1vEH7NhqmQVnE1Y2+LLD9Mw10+XOmFZOyvi5wUrqFvm8mcGipolXMBI6mW+irMoFDSxWtYiZwNN1CX5UJHFqqaBUzgaPpFvqqTODQUkWrmAkcTbfQV2UCh5YqWsVM4Gi6hb4qEzi0VNEqZgJH0y30VZnAoaWKVjETOJpuoa/KBA4tVbSKmcDRdAt9VSZwaKmiVcwEjqZb6KsygUNLFa1iJnA03UJf1R2BS7JRI7TnXVfU37L7nBe4sbHRHYjFNt+5edk3fkZCbzK3TLmzZ0gRpxW+tPuD+f8OfMfMHd82rqiBeTwW5rFbZhRlsT9CUDctpT7r62xw01+h2Yf9hSeT+JzfOtXQ0OBbPW5+diNeoVOncm4+XAE61/oPwMdUmq/jng3FXjx0s/e3pfA6L/CBAwfcELcDtsFlBY2bShRZeru5TdZ++iJM4pbPwfX19eak72EVKHZfNNOfr2vZxz9K0cG8wLnG3GZv42/Dkdy5vlSYd+3favYll2TPWj5FqKKboZnIfA/4CTB3zYLCfMypXmdGrjvpfQ/kGfqZxFujRUVpI7A1aNz/rmojh76w9x3MhLPhJCg2YXA6tWba2wsGzRpYSf+cY0pmHa4GEFkxx8B0mAJngvtsC9MKp1JnRqwpwBdsXC1sBf8z0fybRnwuiXUocKvWKxcuXDi0urp6ZGVlpS8N9gaBBzQ1NR11NFL+uWTJkkRfsGmlVXaYKZApkCmQKZAp0H8U+A8xtjUb6FW3lgAAAABJRU5ErkJggg=="},function(e,t,a){e.exports=a.p+"static/media/swap.c28fad4b.svg"},function(e,t,a){e.exports=a.p+"static/media/left_arrow.fb9494c3.svg"},function(e,t,a){e.exports=a.p+"static/media/right_arrow.ab264aa7.svg"},,function(e,t,a){e.exports={ProgressBar:"ProgressBar_ProgressBar__3GokE"}},function(e,t,a){e.exports=a.p+"static/media/error.78f3f4cd.svg"},function(e,t,a){e.exports=a(236)},,,,,function(e,t,a){},,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/right.7f1561b5.svg"},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(49),o=a.n(i),s=a(11),c=a(12),l=a(14),p=a(13),u=a(15),d=(a(121),a(234)),m=a(131),h=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.addSpec(this.props.vega_spec)}},{key:"checkLoadedFlag",value:function(e,t){if(t.vegaLoading)window.setTimeout(t.checkLoadedFlag,100,e,t);else{t.vegaLoading,!e||e.values;var a=e.values.slice(),n=d.changeset();if(null!=e.progress){var r=parseFloat(e.progress);parseInt(100*r,10)>=100?(document.getElementById("progress_bar").style.width=parseInt(100*r)+"%",setTimeout(function(){document.getElementById("progress_bar").style.opacity="0.0"},1e3)):document.getElementById("progress_bar").style.width=parseInt(100*r)+"%"}for(var i=t.vegaView.data("source_2"),o=0;o<a.length;o++)if(null!=a[o].a)for(var s=0;s<i.length;s++)i[s].a===a[o].a&&(n=n.remove(i[s]));else if(i.length>0){n=n.remove(i);break}n=n.insert(a),t.vegaView.change("source_2",n).runAfter(function(e){}),t.vegaView.toCanvas().then(function(e){t.hidden_container.innerHTML="",t.hidden_container.appendChild(e)})}}},{key:"updateData",value:function(e){this.checkLoadedFlag(e,this)}},{key:"addSpec",value:function(e){this.bubbleOpts={showAllFields:!0},this.vega_json=e,this.vega_json.autosize={type:"fit",resize:!0,contains:"padding"},null!=this.vega_json.metadata&&null!=this.vega_json.metadata.bubbleOpts&&(this.bubbleOpts=this.vega_json.metadata.bubbleOpts),this.vegaLoading=!0,this.vegaView=new d.View(d.parse(this.vega_json),{renderer:"svg"}).initialize(this.vega_container).hover().run(),this.vegaLoading=!1,m.vega(this.vegaView,this.bubbleOpts),"MacIntel"===window.navigator.platform&&window.webkit.messageHandlers.scriptHandler.postMessage({status:"ready"})}},{key:"getSpec",value:function(){for(var e=this.vega_json,t=this.vegaView.data("source_2"),a=0;a<e.data.length;a++)"source_2"===e.data[a].name&&(e.data[a].values=t);return JSON.stringify(e)}},{key:"getData",value:function(){for(var e=this.vegaView.data("source_2"),t="object"!=typeof e?JSON.parse(e):e,a="",n=0;n<t.length;n++){var r="";for(var i in t[n])""!=r&&(r+=","),r+=t[n][i];a+=r+"\r\n"}return a}},{key:"exportPNG",value:function(){return this.hidden_container.childNodes[0].toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:["vega_container"].join(" "),ref:function(t){e.vega_container=t}}),r.a.createElement("div",{className:["hidden_cont"].join(" "),ref:function(t){e.hidden_container=t}}))}}]),t}(n.Component),b=(a(140),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",Object.assign({},this.props,{className:"sticky-table-container "+(this.props.className||"")}),this.props.children)}}]),t}(n.Component)),f=(a(142),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"accordian_window"==this.props.className&&console.log(this.props),r.a.createElement("div",Object.assign({},this.props,{className:"sticky-table-row "+(this.props.className||"")}),this.props.children)}}]),t}(n.Component)),g=(a(144),n.Component,a(146)),v=a(151);(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).scrollToValue=function(){for(var e=document.getElementsByClassName("header_element"),t=0;t<e.length;t++)if(e[t].innerText==a.scrollVal||e[t].innerText==a.props.scrollVal){a.yScrollbar.scrollTop=e[t].offsetTop-e[t].offsetHeight-6,a.scrollVal=-1,a.props.scrollVal=-1;break}a.props.reset_scroll(a.props.parent_context)},a.setScrollData=function(){return a.suppressScrollX=!1,a.suppressScrollY=!1,a.scrollData={scrollTop:a.yScrollbar.scrollTop,scrollHeight:a.yScrollbar.scrollHeight,clientHeight:a.yScrollbar.clientHeight,scrollLeft:a.xScrollbar.scrollLeft,scrollWidth:a.xScrollbar.scrollWidth,clientWidth:a.xScrollbar.clientWidth}},a.onScrollBarX=function(){a.suppressScrollX?(a.handleScroll(),a.suppressScrollX=!1):(a.scrollData.scrollLeft=a.xWrapper.scrollLeft=a.xScrollbar.scrollLeft,a.suppressScrollX=!0)},a.onScrollBarY=function(){a.suppressScrollY?(a.handleScroll(),a.suppressScrollY=!1):(a.scrollData.scrollTop=a.yWrapper.scrollTop=a.yScrollbar.scrollTop,a.suppressScrollY=!0)},a.onScrollX=function(){var e=Math.max(a.xWrapper.scrollLeft,0);a.stickyHeader.style.transform="translate("+-1*e+"px, 0)"},a.scrollXScrollbar=function(){a.suppressScrollX?(a.handleScroll(),a.suppressScrollX=!1):(a.scrollData.scrollLeft=a.xScrollbar.scrollLeft=a.xWrapper.scrollLeft,a.suppressScrollX=!0)},a.scrollYScrollbar=function(){a.suppressScrollY?(a.handleScroll(),a.suppressScrollY=!1):(a.scrollData.scrollTop=a.yScrollbar.scrollTop=a.yWrapper.scrollTop,a.suppressScrollY=!0)},a.handleScroll=function(){a.props.onScroll&&a.props.onScroll(a.scrollData);var e=a.getScrollBottom(),t=a.getScrollTop();1==e&&a.updateScrollDown(),0==t&&a.updateScrollUp()},a.updateScrollDown=function(){if(a.props.set_higher*a.props.step_size>=a.props.size)return"Max value reached";if(a.props.scroll_state){var e=document.getElementsByClassName("header_element");if(e.length>0){for(var t=e[e.length-1].innerText,n=0;n<e.length;n++){if(e[n].getBoundingClientRect().top>0){t=e[n].innerText;break}}a.scrollVal=t,a.props.scroll_callback(a.scrollVal,a.props.parent_context,1)}}},a.updateScrollUp=function(){if(a.props.set_lower*a.props.step_size<=0)return"Min value reached";if(a.props.scroll_state){var e=document.getElementsByClassName("header_element");e.length>0&&(a.scrollVal=parseInt(e[0].innerText,10),a.props.scroll_callback(a.scrollVal,a.props.parent_context,-1))}},a.getScrollBottom=function(){return(a.yScrollbar.scrollTop+a.yScrollbar.clientHeight)/a.yScrollbar.scrollHeight},a.getScrollTop=function(){return a.yScrollbar.scrollTop/a.yScrollbar.scrollHeight},a.getRows=function(e,t){a.scroll=!1},a.onResize=function(){a.setScrollBarDims(),a.setScrollBarWrapperDims(),a.setRowHeights(),a.setColumnWidths(),a.setScrollData(),a.handleScroll()},a.setScrollBarWrapperDims=function(){a.xScrollbar.style.width="calc(100% - "+a.yScrollSize+"px)",a.yScrollbar.style.height="calc(100% - "+a.stickyHeader.offsetHeight+"px)",a.yScrollbar.style.top=a.stickyHeader.offsetHeight+"px"},a.id=Math.floor(1e9*Math.random())+"",a.rowCount=0,a.columnCount=0,a.xScrollSize=0,a.yScrollSize=0,a.stickyHeaderCount=0===e.stickyHeaderCount?0:a.stickyHeaderCount||1,a.container_ref=r.a.createRef(),a.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.table=document.getElementById("sticky-table-"+this.id),this.table&&(this.realTable=this.table.querySelector("#sticky-table-x-wrapper").firstChild,this.xScrollbar=this.table.querySelector("#x-scrollbar"),this.yScrollbar=this.table.querySelector("#y-scrollbar"),this.xWrapper=this.table.querySelector("#sticky-table-x-wrapper"),this.yWrapper=this.table.querySelector("#sticky-table-y-wrapper"),this.stickyHeader=this.table.querySelector("#sticky-table-header"),this.stickyColumn=this.table.querySelector("#sticky-table-column"),this.stickyCorner=this.table.querySelector("#sticky-table-corner"),this.setScrollData(),v(this.realTable,this.onResize),this.onResize(),setTimeout(this.onResize),this.addScrollBarEventHandlers(),this.scrollToValue())}},{key:"componentDidUpdate",value:function(){this.scrollToValue(),this.onResize();for(var e=document.getElementsByClassName("header_element"),t=0;t<e.length;t++)e[t].style.height=this.getModeHeights()+"px"}},{key:"componentWillUnmount",value:function(){this.table&&(this.xWrapper.removeEventListener("scroll",this.onScrollX),this.xWrapper.removeEventListener("scroll",this.scrollXScrollbar),this.xScrollbar.removeEventListener("scroll",this.onScrollBarX),this.yWrapper.removeEventListener("scroll",this.scrollYScrollbar),this.yScrollbar.removeEventListener("scroll",this.onScrollBarY),v.unbind(this.realTable))}},{key:"addScrollBarEventHandlers",value:function(){this.xWrapper.addEventListener("scroll",this.onScrollX),this.xWrapper.addEventListener("scroll",this.scrollXScrollbar),this.xScrollbar.addEventListener("scroll",this.onScrollBarX),this.yWrapper.addEventListener("scroll",this.scrollYScrollbar),this.yScrollbar.addEventListener("scroll",this.onScrollBarY)}},{key:"setScrollBarPaddings",value:function(){var e="0px 0px "+this.xScrollSize+"px 0px";this.table.style.padding=e;e="0px "+this.yScrollSize+"px 0px 0px";this.xWrapper.firstChild.style.padding=e}},{key:"setScrollBarDims",value:function(){this.xScrollSize=this.xScrollbar.offsetHeight-this.xScrollbar.clientHeight,this.yScrollSize=this.yScrollbar.offsetWidth-this.yScrollbar.clientWidth,this.isFirefox||this.setScrollBarPaddings();var e=this.getSize(this.realTable.firstChild).width;this.xScrollbar.firstChild.style.width=e+"px";var t=this.getSize(this.realTable).height+this.xScrollSize-this.stickyHeader.offsetHeight;this.yScrollbar.firstChild.style.height=t+"px",this.xScrollSize&&(this.xScrollbar.style.height=this.xScrollSize+1+"px"),this.yScrollSize&&(this.yScrollbar.style.width=this.yScrollSize+1+"px")}},{key:"getModeHeights",value:function(){var e=[];if(this.props.stickyColumnCount)for(var t=0;t<this.rowCount;t++)e.push(this.getSize(this.realTable.childNodes[t].childNodes[0]).height);return function(e){var t,a={},n=0;return e.forEach(function(e){a[e]=(a[e]||0)+1,n<a[e]&&(n=a[e],t=e)}),+t}(e)}},{key:"setRowHeights",value:function(){var e,t,a,n=void 0!=this.props.y?this.props.y:-1,r=0;if(this.props.stickyColumnCount){for(e=1;e<this.rowCount;e++)(t=this.realTable.childNodes[e].firstChild)&&(this.realTable.childNodes[e].childNodes[1].style.height=this.getModeHeights()+"px",this.stickyColumn.firstChild.childNodes[e].style.height=this.getModeHeights()+"px",a=this.getSize(t).height,this.stickyColumn.firstChild.childNodes[e].firstChild.style.height=a+"px",0==e&&this.stickyCorner.firstChild.childNodes[e]&&(this.stickyCorner.firstChild.firstChild.firstChild.style.height=a+"px")),n==e&&(r=this.stickyColumn.firstChild.childNodes[e].offsetTop);this.stickyCorner.firstChild.firstChild.firstChild.style.height=this.stickyHeader.offsetHeight+"px",this.stickyColumn.firstChild.childNodes[0].firstChild.style.height=this.stickyHeader.offsetHeight+"px",document.getElementById("data_container")&&(document.getElementById("data_container").style.height=4*this.getModeHeights()-30+"px",document.getElementById("data_container").style.width=this.xScrollbar.clientWidth-30+"px",document.getElementById("data_container").style.left="15px",document.getElementById("data_container").style.top=r+this.getModeHeights()+15+"px")}}},{key:"setColumnWidths",value:function(){var e,t,a,n,r;if(this.stickyHeaderCount){for(r=0,e=0;e<this.columnCount;e++)if(t=this.realTable.firstChild.childNodes[e]){a=this.getSize(t).width,(n=this.table.querySelector("#sticky-header-cell-"+e)).style.width=a+"px",n.style.minWidth=a+"px";var i=this.stickyCorner.firstChild.firstChild;i&&i.childNodes[e]&&((n=i.childNodes[e]).style.width=a+"px",n.style.minWidth=a+"px",(n=i.childNodes[e]).style.width=a+"px",n.style.minWidth=a+"px",r+=a)}this.stickyColumn.firstChild.style.width=r+"px",this.stickyColumn.firstChild.style.minWidth=r+"px"}}},{key:"getStickyColumns",value:function(e){var t,a=this,n=this.props.stickyColumnCount,i=[],o=void 0!=this.props.y?parseInt(this.props.y,10):-1;return-1!=this.props.scrollVal&&(this.scroll=!1),e.forEach(function(e,s){if(t=r.a.Children.toArray(e.props.children),e.props.accordion&&o>0)if(a.props.data)if(a.props.data.index+1==parseInt(a.props.y,10)&&a.props.data.column==a.props.column_name&&void 0!=a.props.column_name){var c=[];switch(a.props.data.type){case window.flex_type_enum.string:c.push(r.a.createElement("div",{style:{"word-wrap":"break-word"}},a.props.data.data));break;case window.flex_type_enum.dict:case window.flex_type_enum.vector:case window.flex_type_enum.list:case window.flex_type_enum.nd_vector:c.push(r.a.createElement(g,{className:"json-pretty",json:a.props.data.data}))}i.push(r.a.createElement(f,e.props,r.a.createElement("div",{id:"data_container",style:{position:"absolute",overflow:"scroll",width:100,left:3,zIndex:99,textAlign:"left",background:"#F7F7F7"}},r.a.createElement("div",{style:{padding:10}},c))))}else i.push(r.a.createElement(f,e.props,r.a.createElement("div",{id:"data_container",style:{position:"absolute",overflow:"scroll",width:100,left:3,zIndex:99,textAlign:"left",background:"#F7F7F7"}},r.a.createElement("div",{style:{padding:10}},"Loading..."))));else i.push(r.a.createElement(f,e.props,r.a.createElement("div",{id:"data_container",style:{position:"absolute",overflow:"scroll",width:100,left:3,zIndex:99,textAlign:"left",background:"#F7F7F7"}},r.a.createElement("div",{style:{padding:10}},"Loading..."))));else e.props.spacers&&o>0?i.push(r.a.createElement(f,Object.assign({},e.props,{key:s}),t.slice(0,n))):i.push(r.a.createElement(f,Object.assign({},e.props,{id:"",key:s}),t.slice(0,n)))}),i}},{key:"getStickyHeader",value:function(e){var t=e[0],a=[];return r.a.Children.toArray(t.props.children).forEach(function(e,t){a.push(r.a.cloneElement(e,{id:"sticky-header-cell-"+t,key:t}))}),r.a.createElement(f,Object.assign({},t.props,{id:"sticky-header-row"}),a)}},{key:"getStickyCorner",value:function(e){var t,a=this.props.stickyColumnCount,n=[];return e.forEach(function(e,i){0===i&&(t=r.a.Children.toArray(e.props.children),n.push(r.a.createElement(f,Object.assign({},e.props,{id:"",key:i}),t.slice(0,a))))}),n}},{key:"getSize",value:function(e){return{width:e?e.getBoundingClientRect().width:0,height:e?e.getBoundingClientRect().height:0}}},{key:"render",value:function(){var e,t,a,n=r.a.Children.toArray(this.props.children);return this.rowCount=n.length,this.columnCount=n[0]&&r.a.Children.toArray(n[0].props.children).length||0,n.length&&(this.props.stickyColumnCount>0&&this.stickyHeaderCount>0&&(a=this.getStickyCorner(n)),this.props.stickyColumnCount>0&&(e=this.getStickyColumns(n)),this.stickyHeaderCount>0&&(t=this.getStickyHeader(n))),r.a.createElement("div",{className:"sticky-table "+(this.props.className||""),id:"sticky-table-"+this.id},r.a.createElement("div",{id:"x-scrollbar"},r.a.createElement("div",null)),r.a.createElement("div",{id:"y-scrollbar"},r.a.createElement("div",null)),r.a.createElement("div",{className:"sticky-table-corner",id:"sticky-table-corner"},r.a.createElement(b,null,a)),r.a.createElement("div",{className:"sticky-table-header",id:"sticky-table-header"},r.a.createElement(b,null,t)),r.a.createElement("div",{className:"sticky-table-y-wrapper",id:"sticky-table-y-wrapper"},r.a.createElement("div",{className:"sticky-table-column",id:"sticky-table-column"},r.a.createElement(b,null,e)),r.a.createElement("div",{className:"sticky-table-x-wrapper",id:"sticky-table-x-wrapper"},r.a.createElement(b,null,n))))}}]),t}(n.PureComponent)).defaultProps={stickyHeaderCount:1,stickyColumnCount:1};a(152),a(154),a(157),a(158),a(55).format(",");var y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={data:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateData",value:function(e){this.setState({data:e})}},{key:"componentDidMount",value:function(){window.webkit.messageHandlers.scriptHandler.postMessage({status:"ready"})}},{key:"render",value:function(){return r.a.createElement("div",null,"TC Table - Start",JSON.stringify(this.props.table_spec),JSON.stringify(this.state.data))}}]),t}(n.Component),_=(a(159),a(10)),C=(a(161),a(102)),E=a.n(C),S=(a(163),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationSettingsSelection"},r.a.createElement("div",{className:"TCEvaluationSettingsSelectionTitle"},"Metrics"),r.a.createElement("div",{className:"TCEvaluationSettingsSelectionCont"},r.a.createElement("input",{type:"checkbox",name:"accuracy_checkbox",checked:this.props.accuracy,onChange:this.props.changeAccuracy.bind(this)}),r.a.createElement("span",{className:"TCEvaluationSettingsSelectionContText"},"Accuracy"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"f1_score_checkbox",checked:this.props.f1_score,onChange:this.props.changeF1Score.bind(this)}),r.a.createElement("span",{className:"TCEvaluationSettingsSelectionContText"},"F1 Score"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"precision_checkbox",checked:this.props.precision,onChange:this.props.changePrecision.bind(this)}),r.a.createElement("span",{className:"TCEvaluationSettingsSelectionContText"},"Precision"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"recall_checkbox",checked:this.props.recall,onChange:this.props.changeRecall.bind(this)}),r.a.createElement("span",{className:"TCEvaluationSettingsSelectionContText"},"Recall")))}}]),t}(n.Component)),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).changeOpenClose=function(){a.setState({open:!a.state.open})},a.renderSettings=function(){if(a.state.open)return r.a.createElement("div",{className:"TCEvaluationSettingsSelectionContainer"},r.a.createElement(S,{accuracy:a.props.accuracy,changeAccuracy:a.props.changeAccuracy.bind(Object(_.a)(Object(_.a)(a))),precision:a.props.precision,changePrecision:a.props.changePrecision.bind(Object(_.a)(Object(_.a)(a))),recall:a.props.recall,changeRecall:a.props.changeRecall.bind(Object(_.a)(Object(_.a)(a))),f1_score:a.props.f1_score,changeF1Score:a.props.changeF1Score.bind(Object(_.a)(Object(_.a)(a)))}))},a.state={open:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationSettings"},r.a.createElement("div",{className:"TCEvaluationSettingsImage",onClick:this.changeOpenClose.bind(this)},r.a.createElement("img",{src:E.a,height:20,width:20})),this.renderSettings())}}]),t}(n.Component),w=(a(165),a(167),a(103)),I=a.n(w),j=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationTooltip"},r.a.createElement("div",{className:"TCEvaluationTooltipText"},this.props.text),r.a.createElement("div",{className:"TCEvaluationCarret"},r.a.createElement("img",{src:I.a,height:9,className:"TCEvaluationCarretIcon"})))}}]),t}(n.Component),x=a(104),k=a.n(x),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderIcon=function(){if(a.props.tooltip)return r.a.createElement("div",{className:"TCEvaluationMetricsInfoIcon"},r.a.createElement("img",{src:k.a,height:10,width:10}))},a.renderTooltip=function(){if(a.props.tooltip)return r.a.createElement("div",{className:"TCEvaluationMetricsTooltipContainer"},r.a.createElement(j,{text:a.props.tooltip}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationMetrics"},r.a.createElement("div",{className:"TCEvaluationMetricsTitleContainer"},r.a.createElement("div",{className:"TCEvaluationMetricsTitle"},this.props.title),this.renderIcon(),this.renderTooltip()),r.a.createElement("div",{className:"TCEvaluationMetricsValueContainer"},this.props.value))}}]),t}(n.Component),T=a(55),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).formatDecimal=T.format(".2f"),a.state={accuracy:!0,f1_score:!1,precision:!1,recall:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderMetrics",value:function(){var e=[];return this.props.accuracy_visible&&e.push(r.a.createElement(N,{title:"Accuracy",value:this.formatDecimal(100*this.props.accuracy)+"%",tooltip:this.props.total_correct+" out of "+this.props.total_num+" predicted correctly"})),this.props.precision_visible&&e.push(r.a.createElement(N,{title:"Precision",value:this.formatDecimal(100*this.props.precision)+"%",tooltip:"Out of the labels predicted by the model, which were correct"})),this.props.recall_visible&&e.push(r.a.createElement(N,{title:"Recall",value:this.formatDecimal(100*this.props.recall)+"%",tooltip:"Out of the correct labels, which were predicted by the model"})),this.props.f1_score_visible&&e.push(r.a.createElement(N,{title:"F1 Score",value:this.formatDecimal(this.props.recall*this.props.precision*2/(this.props.recall+this.props.precision)*100)+"%",tooltip:"A harmonic average of precision and recall"})),e.push(r.a.createElement(N,{title:"Total Tested",value:this.props.total_num,tooltip:"Total number of examples tested"})),e}},{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationOverview"},r.a.createElement("div",{className:"TCEvaluationOverviewContainer"},r.a.createElement("div",{className:"TCEvaluationOverviewTitleContainer"},r.a.createElement("div",{className:"TCEvaluationOverviewTitle"},"Overview"),r.a.createElement(O,{accuracy:this.props.accuracy_visible,changeAccuracy:this.props.changeAccuracy.bind(this),precision:this.props.precision_visible,changePrecision:this.props.changePrecision.bind(this),recall:this.props.recall_visible,changeRecall:this.props.changeRecall.bind(this),f1_score:this.props.f1_score_visible,changeF1Score:this.props.changeF1Score.bind(this)})),r.a.createElement("div",{className:"TCEvaluationOverviewMetricsContainer"},r.a.createElement(N,{title:"Model",value:this.props.model_type}),r.a.createElement(N,{title:"Number of Iterations",value:this.props.iterations}),this.renderMetrics())))}}]),t}(n.Component),L=(a(169),a(171),a(173),a(105)),D=a.n(L),B=(a(175),a(177),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationImageCellsHover"},r.a.createElement("img",{width:200,src:this.props.src}))}}]),t}(n.Component)),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onHoverState=function(){a.setState({hover:!0})},a.offHoverState=function(){a.setState({hover:!1})},a.renderImage=function(){if(a.state.hover)return r.a.createElement(B,{src:"data:image/"+a.props.value.format+";base64,"+a.props.value.data})},a.state={hover:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationImageCellsWrapper",onMouseEnter:this.onHoverState.bind(this),onMouseLeave:this.offHoverState.bind(this)},r.a.createElement("div",{className:"TCEvaluationImageCells"},r.a.createElement("img",{width:30,src:"data:image/"+this.props.value.format+";base64,"+this.props.value.data})),this.renderImage())}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).renderPercentLeft=function(){if(a.props.value>=.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#FFFFFF"}},a.formatDecimal(100*a.props.value)+"%")},a.renderAmountLeft=function(){if(a.props.value/a.props.max>=.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#FFFFFF"}},a.formatDecimal(a.props.value))},a.renderPercentRight=function(){if(a.props.value<.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#484856"}},a.formatDecimal(100*a.props.value)+"%")},a.renderAmountRight=function(){if(a.props.value/a.props.max<.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#484856"}},a.formatDecimal(a.props.value))},a.renderWarning=function(){if(a.props.value<=.2)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedWarning"},r.a.createElement("img",{src:D.a,height:16}))},a.formatDecimal=T.format(".0f"),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"images"==this.props.type?r.a.createElement("div",{className:"TCEvaluationCellsImages"},r.a.createElement("div",{className:"TCEvaluationCellsImagesContainer"},this.props.value.map(function(e,t){return r.a.createElement(M,{value:e})}))):"percent"==this.props.type?r.a.createElement("div",{className:"TCEvaluationCellsPercent"},r.a.createElement("div",{className:"TCEvaluationCellsPercentShaded",style:{width:100*this.props.value+"%"}},this.renderPercentLeft()),this.renderPercentRight(),this.renderWarning()):"amount"==this.props.type?r.a.createElement("div",{className:"TCEvaluationCellsAmount"},r.a.createElement("div",{className:"TCEvaluationCellsAmountShaded",style:{width:this.props.value/this.props.max*100+"%"}},this.renderAmountLeft()),this.renderAmountRight()):r.a.createElement("div",{className:"TCEvaluationCellsText"},r.a.createElement("div",{className:"TCEvaluationCellsTextCont"},this.props.value))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).renderSelected=function(){if(a.props.selected)return{background:"#D6E7FB"}},a.renderAccuracy=function(){if(a.props.accuracy_visible)return r.a.createElement(H,{type:"percent",value:a.props.data.correct/(a.props.data.correct+a.props.data.incorrect),selected:a.props.selected,hovered:a.state.hovered})},a.renderPrecision=function(){if(a.props.precision_visible)return r.a.createElement(H,{type:"percent",value:a.props.data.precision,selected:a.props.selected,hovered:a.state.hovered})},a.renderRecall=function(){if(a.props.recall_visible)return r.a.createElement(H,{type:"percent",value:a.props.data.recall,selected:a.props.selected,hovered:a.state.hovered})},a.renderF1Score=function(){if(a.props.f1_score_visible)return r.a.createElement(H,{type:"percent",value:a.props.data.f1_score,selected:a.props.selected,hovered:a.state.hovered})},a.mouse_enter=function(){a.setState({hovered:!0})},a.mouse_leave=function(){a.setState({hovered:!1})},a.state={hovered:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationRows",style:this.renderSelected(),onClick:this.props.onclick.bind(this,this.props.data.name),onMouseEnter:this.mouse_enter.bind(this),onMouseLeave:this.mouse_leave.bind(this)},r.a.createElement("div",{className:"TCEvaluationRowContainer"},r.a.createElement(H,{value:this.props.data.name}),r.a.createElement(H,{type:"images",value:this.props.data.correct_images}),this.renderAccuracy(),this.renderPrecision(),this.renderRecall(),this.renderF1Score(),r.a.createElement(H,{type:"amount",value:this.props.data.num_examples,max:this.props.max_value,selected:this.props.selected,hovered:this.state.hovered})))}}]),t}(n.Component),F=(a(179),a(181),a(106)),z=a.n(F),P=a(84),W=a.n(P),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderCarret=function(){return a.props.enabled?a.props.direction?r.a.createElement("div",{className:"TCEvaluationHeaderCellDropDown",style:{transform:"rotate(180deg)"}},r.a.createElement("img",{src:W.a})):r.a.createElement("div",{className:"TCEvaluationHeaderCellDropDown"},r.a.createElement("img",{src:W.a})):r.a.createElement("div",{className:"TCEvaluationHeaderCellDropDown"},r.a.createElement("img",{src:z.a}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"images"==this.props.type?r.a.createElement("div",{className:"TCEvaluationHeaderCellImages"},this.props.name):"percent"==this.props.type?r.a.createElement("div",{className:"TCEvaluationHeaderCellPercent",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCarret()):"amount"==this.props.type?r.a.createElement("div",{className:"TCEvaluationHeaderCellAmount",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCarret()):r.a.createElement("div",{className:"TCEvaluationHeaderCellText",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCarret())}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).clickedAccuracy=function(){a.props.updateSortBy("accuracy"),a.props.updateSortDirection()},a.clickedPrecision=function(){a.props.updateSortBy("precision"),a.props.updateSortDirection()},a.clickedRecall=function(){a.props.updateSortBy("recall"),a.props.updateSortDirection()},a.clickedF1Score=function(){a.props.updateSortBy("f1_score"),a.props.updateSortDirection()},a.clickedCell=function(){a.props.updateSortBy("class"),a.props.updateSortDirection()},a.clickNumTest=function(){a.props.updateSortBy("train"),a.props.updateSortDirection()},a.clickNumTrain=function(){a.props.updateSortBy("test"),a.props.updateSortDirection()},a.renderAccuracy=function(){if(a.props.accuracy_visible)return r.a.createElement(V,{type:"percent",name:"ACCURACY",onclick:a.clickedAccuracy.bind(Object(_.a)(Object(_.a)(a))),enabled:"accuracy"==a.props.sort_by,direction:a.props.sort_direction})},a.renderPrecision=function(){if(a.props.precision_visible)return r.a.createElement(V,{type:"percent",name:"PRECISION",onclick:a.clickedPrecision.bind(Object(_.a)(Object(_.a)(a))),enabled:"precision"==a.props.sort_by,direction:a.props.sort_direction})},a.renderRecall=function(){if(a.props.recall_visible)return r.a.createElement(V,{type:"percent",name:"RECALL",onclick:a.clickedRecall.bind(Object(_.a)(Object(_.a)(a))),enabled:"recall"==a.props.sort_by,direction:a.props.sort_direction})},a.renderF1Score=function(){if(a.props.f1_score_visible)return r.a.createElement(V,{type:"percent",name:"F1 SCORE",onclick:a.clickedF1Score.bind(Object(_.a)(Object(_.a)(a))),enabled:"f1_score"==a.props.sort_by,direction:a.props.sort_direction})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationHeader"},r.a.createElement("div",{className:"TCEvaluationHeaderContainer"},r.a.createElement(V,{name:"CLASS NAME",onclick:this.clickedCell.bind(this),enabled:"class"==this.props.sort_by,direction:this.props.sort_direction}),r.a.createElement(V,{type:"images",name:"EXAMPLE IMAGES"}),this.renderAccuracy(),this.renderPrecision(),this.renderRecall(),this.renderF1Score(),r.a.createElement(V,{type:"amount",name:"NUM TEST",onclick:this.clickNumTest.bind(this),enabled:"train"==this.props.sort_by,direction:this.props.sort_direction})))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).maxValueNumTest=function(){return Math.max.apply(Math,a.props.data.map(function(e){return e.num_examples}))},a.sortingColumns=function(e,t){return"class"==a.props.sort_by&&a.props.sort_direction?e.name>t.name?-1:1:"class"!=a.props.sort_by||a.props.sort_direction?"accuracy"==a.props.sort_by&&a.props.sort_direction?e.correct/e.incorrect<t.correct/t.incorrect?-1:1:"accuracy"!=a.props.sort_by||a.props.sort_direction?"precision"==a.props.sort_by&&a.props.sort_direction?e.precision<t.precision?-1:1:"precision"!=a.props.sort_by||a.props.sort_direction?"f1_score"==a.props.sort_by&&a.props.sort_direction?e.f1_score<t.f1_score?-1:1:"f1_score"!=a.props.sort_by||a.props.sort_direction?"recall"==a.props.sort_by&&a.props.sort_direction?e.recall<t.recall?-1:1:"recall"!=a.props.sort_by||a.props.sort_direction?"train"==a.props.sort_by&&a.props.sort_direction?e.num_examples<t.num_examples?-1:1:"train"!=a.props.sort_by||a.props.sort_direction?"test"==a.props.sort_by&&a.props.sort_direction?e.num_examples<t.num_examples?-1:1:"test"!=a.props.sort_by||a.props.sort_direction?0:e.num_examples>t.num_examples?-1:1:e.num_examples>t.num_examples?-1:1:e.recall>t.recall?-1:1:e.f1_score>t.f1_score?-1:1:e.precision>t.precision?-1:1:e.correct/e.incorrect>t.correct/t.incorrect?-1:1:e.name<t.name?-1:1},a.selectClassName=function(){return a.props.footer_open?"TCEvaluationTable TCEvaluationTableOpen":"TCEvaluationTable"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.maxValueNumTest();return r.a.createElement("div",{className:this.selectClassName()},r.a.createElement(G,{accuracy_visible:this.props.accuracy_visible,precision_visible:this.props.precision_visible,f1_score_visible:this.props.f1_score_visible,recall_visible:this.props.recall_visible,updateSortDirection:this.props.updateSortDirection.bind(this),updateSortBy:this.props.updateSortBy.bind(this),sort_direction:this.props.sort_direction,sort_by:this.props.sort_by}),this.props.data.sort(this.sortingColumns).map(function(a,n){return r.a.createElement(R,{data:a,accuracy_visible:e.props.accuracy_visible,precision_visible:e.props.precision_visible,f1_score_visible:e.props.f1_score_visible,recall_visible:e.props.recall_visible,max_value:t,selected:e.props.filter_confusion==a.name,onclick:e.props.row_click.bind(e)})}))}}]),t}(n.Component),J=(a(183),a(107)),U=a.n(J),Y=a(85),q=a.n(Y),Z=(a(185),a(187),a(189),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).renderAmountLeft=function(){if(a.props.value/a.props.max>=.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#FFFFFF"}},a.formatDecimal(a.props.value))},a.renderAmountRight=function(){if(a.props.value/a.props.max<.5)return r.a.createElement("div",{className:"TCEvaluationCellsPercentShadedText",style:{color:"#484856"}},a.formatDecimal(a.props.value))},a.formatDecimal=T.format(".0f"),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"images"==this.props.type?r.a.createElement("div",{className:"TCEvaluationConfusionCellImage"},this.props.value.map(function(e,t){return r.a.createElement(M,{value:e})})):"percent"==this.props.type?r.a.createElement("div",{className:"TCEvaluationConfusionCell"}):"amount"==this.props.type?r.a.createElement("div",{className:"TCEvaluationCellsAmount"},r.a.createElement("div",{className:"TCEvaluationCellsAmountShaded",style:{width:this.props.value/this.props.max*100+"%"}},this.renderAmountLeft()),this.renderAmountRight()):r.a.createElement("div",{className:"TCEvaluationConfusionCellText"},this.props.value)}}]),t}(n.Component)),K=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationConfusionRow",onClick:this.props.selectRowConfusions.bind(this,this.props.consideration.actual,this.props.consideration.predicted)},r.a.createElement(Z,{type:"text",value:this.props.consideration.actual}),r.a.createElement(Z,{type:"text",value:this.props.consideration.predicted}),r.a.createElement(Z,{type:"amount",value:this.props.consideration.count,max:this.props.maxValue}),r.a.createElement(Z,{type:"images",value:this.props.consideration.images}))}}]),t}(n.Component),Q=(a(191),a(193),a(108)),$=a.n(Q),ee=a(86),te=a.n(ee),ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderCaret=function(){return a.props.enabled?a.props.direction?r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellDropDown",style:{transform:"rotate(180deg)"}},r.a.createElement("img",{src:te.a})):r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellDropDown"},r.a.createElement("img",{src:te.a})):r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellDropDown"},r.a.createElement("img",{src:$.a}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"images"==this.props.type?r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellImages"},this.props.name):"percent"==this.props.type?r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellPercent",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCaret()):"amount"==this.props.type?r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellAmount",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCaret()):r.a.createElement("div",{className:"TCEvaluationConfusionHeaderCellText",onClick:this.props.onclick.bind(this)},this.props.name,this.renderCaret())}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).clickActual=function(){a.props.updateSortByConfusion("actual")},a.clickPredicted=function(){a.props.updateSortByConfusion("predicted")},a.clickCount=function(){a.props.updateSortByConfusion("count")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationConfusionHeader"},r.a.createElement(ae,{name:"ACTUAL CLASS",onclick:this.clickActual.bind(this),enabled:"actual"==this.props.sort_by_confusions,direction:!this.props.sort_direction_confusions}),r.a.createElement(ae,{name:"PREDICTED CLASS",onclick:this.clickPredicted.bind(this),enabled:"predicted"==this.props.sort_by_confusions,direction:!this.props.sort_direction_confusions}),r.a.createElement(ae,{name:"NUMBER INCORRECT",type:"percent",onclick:this.clickCount.bind(this),enabled:"count"==this.props.sort_by_confusions,direction:!this.props.sort_direction_confusions}),r.a.createElement(ae,{name:"INCORRECT CLASSIFICATIONS",type:"images"}))}}]),t}(n.Component),re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).maxCount=function(){return Math.max.apply(Math,a.props.considerations.map(function(e){return e.count}))},a.filterData=function(e){return null==a.props.filter_confusion||e.actual==a.props.filter_confusion},a.sortData=function(e,t){return"actual"!=a.props.sort_by_confusions||a.props.sort_direction_confusions?"actual"==a.props.sort_by_confusions&&a.props.sort_direction_confusions?e.actual<t.actual?-1:1:"predicted"!=a.props.sort_by_confusions||a.props.sort_direction_confusions?"predicted"==a.props.sort_by_confusions&&a.props.sort_direction_confusions?e.predicted<t.predicted?-1:1:"count"!=a.props.sort_by_confusions||a.props.sort_direction_confusions?"count"==a.props.sort_by_confusions&&a.props.sort_direction_confusions?e.count<t.count?-1:1:0:e.count>t.count?-1:1:e.predicted>t.predicted?-1:1:e.actual>t.actual?-1:1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.maxCount();return r.a.createElement("div",{className:"TCEvaluationConfusionTable"},r.a.createElement("div",{className:"TCEvaluationConfusionTableContainer"},r.a.createElement(ne,{updateSortByConfusion:this.props.updateSortByConfusion.bind(this),sort_by_confusions:this.props.sort_by_confusions,sort_direction_confusions:this.props.sort_direction_confusions}),this.props.considerations.filter(this.filterData).sort(this.sortData).map(function(a,n){return r.a.createElement(K,{consideration:a,selectRowConfusions:e.props.selectRowConfusions.bind(e),maxValue:t})})))}}]),t}(n.Component),ie=(a(195),a(197),a(198),a(109)),oe=a.n(ie),se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).setHeight=function(){a.imgEl.current.clientWidth>a.imgEl.current.clientHeight?a.setState({height:130}):a.setState({width:130})},a.imgEl=r.a.createRef(),a.state={width:"auto",height:"auto"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationImageComponent"},r.a.createElement("img",{src:"data:image/"+this.props.src.format+";base64,"+this.props.src.data,className:"TCEvaluationImageComponentImage",ref:this.imgEl,width:this.state.width,height:this.state.height,onLoad:this.setHeight.bind(this)}),r.a.createElement("div",{className:"TCEvaluationImageComponentExport"},r.a.createElement("img",{src:oe.a,width:10,height:10})))}}]),t}(n.Component),ce=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationImageViewerContainer"},r.a.createElement("div",{className:"TCEvaluationImageViewerContainerImages"},this.props.data.images.map(function(e,t){return r.a.createElement("div",{className:"TCEvaluationImageComponentWrapper"},r.a.createElement(se,{src:e}))})))}}]),t}(n.Component),le=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).cssOpenStyleContainer=function(){if(a.props.footer_open)return{"min-height":parseInt(window.innerHeight/2,10)+"px"}},a.cssOpenStyleIcon=function(){if(a.props.footer_open)return{transform:"rotate(-180deg)"}},a.filterData=function(e){return e.actual==a.props.selected_actual&&e.predicted==a.props.selected_prediction},a.filterErrorData=function(e){return null==a.props.filter_confusion||e.actual==a.props.filter_confusion},a.render_table=function(){return null!=a.props.selected_actual&&null!=a.props.selected_prediction?r.a.createElement("div",null,r.a.createElement(ce,{reset:a.props.selectRowConfusions.bind(Object(_.a)(Object(_.a)(a)),null,null),data:a.props.considerations.filter(a.filterData)[0]})):r.a.createElement("div",null,r.a.createElement(re,{considerations:a.props.considerations,filter_confusion:a.props.filter_confusion,sort_by_confusions:a.props.sort_by_confusions,sort_direction_confusions:a.props.sort_direction_confusions,updateSortByConfusion:a.props.updateSortByConfusion.bind(Object(_.a)(Object(_.a)(a))),selectRowConfusions:a.props.selectRowConfusions.bind(Object(_.a)(Object(_.a)(a)))}))},a.renderPill=function(e,t){return r.a.createElement("div",{className:"TCEvaluationFooterLabelIcon"},r.a.createElement("span",null,e," :\xa0"),t,"\xa0 \xa0",r.a.createElement("img",{src:q.a,onClick:a.resetFilter.bind(Object(_.a)(Object(_.a)(a)))}))},a.renderPredictedPill=function(e,t){return r.a.createElement("div",{className:"TCEvaluationFooterLabelIcon"},r.a.createElement("span",null,e," :\xa0"),t,"\xa0 \xa0",r.a.createElement("img",{src:q.a,onClick:a.props.selectRowConfusions.bind(Object(_.a)(Object(_.a)(a)),null,null)}))},a.resetFilter=function(){a.props.row_click(null)},a.renderLabel=function(){if(null!=a.props.filter_confusion)return r.a.createElement("div",{className:"TCEvaluationFooterLabel"},a.renderPill("Actual",a.props.filter_confusion))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluationFooter",style:this.cssOpenStyleContainer()},r.a.createElement("div",{className:"TCEvaluationFooterContainer"},r.a.createElement("div",{className:"TCEvaluationFooterText"},r.a.createElement("div",null,r.a.createElement("div",{className:"TCEvaluationErrorsPill"},this.props.considerations.filter(this.filterErrorData).length),"Errors"),this.renderLabel(),r.a.createElement("div",{className:"TCEvaluationFooterLabel"},null!=this.props.selected_prediction?this.renderPredictedPill("Predicted",this.props.considerations.filter(this.filterData)[0].predicted):[])),r.a.createElement("div",{className:"TCEvaluationFooterCarret",onClick:this.props.updateFooterOpen.bind(this)},r.a.createElement("img",{src:U.a,className:"TCEvaluationFooterCarretImage",style:this.cssOpenStyleIcon()}))),this.render_table())}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).loadIncorrect=function(){if(null!=a.state.selected_label&&null==a.state.incorrect_classification[a.state.selected_label]){var e=a.state.incorrect_classification;e[a.state.selected_label]="loading",a.setState({incorrect_classification:e}),"MacIntel"==window.navigator.platform&&window.webkit.messageHandlers.scriptHandler.postMessage({status:"getIncorrects",label:a.state.selected_label+""})}},a.updateSortDirection=function(){a.setState({sort_direction:!a.state.sort_direction})},a.updateSortBy=function(e){a.setState({sort_by:e})},a.updateSortByConfusion=function(e){a.setState({sort_by_confusions:e,sort_direction_confusions:!a.state.sort_direction_confusions})},a.updateFooterOpen=function(){a.setState({footer_open:!a.state.footer_open})},a.setFooterOpen=function(){a.setState({footer_open:!0})},a.summarySeedData=function(){return a.props.spec.label_metrics.map(function(e,t){for(var n={name:e.label,num_examples:e.count,correct:e.correct_count,incorrect:e.count-e.correct_count,f1_score:e.recall*e.precision*2/(e.recall+e.precision),precision:e.precision,recall:e.recall,correct_images:[]},r=[],i=0;i<a.state.correct_classification.length;i++)a.state.correct_classification[i].target==e.label&&(r=a.state.correct_classification[i].images);return n.correct_images=r,n})},a.totalCorrect=function(){for(var e=0,t=0;t<a.props.spec.label_metrics.length;t++)e+=a.props.spec.label_metrics[t].correct_count;return e},a.totalNum=function(){for(var e=0,t=0;t<a.props.spec.label_metrics.length;t++)e+=a.props.spec.label_metrics[t].count;return e},a.changeAccuracy=function(){a.setState({accuracy_visible:!a.state.accuracy_visible})},a.changeF1Score=function(){a.setState({f1_score_visible:!a.state.f1_score_visible})},a.changePrecision=function(){a.setState({precision_visible:!a.state.precision_visible})},a.changeRecall=function(){a.setState({recall_visible:!a.state.recall_visible})},a.createConsiderations=function(){for(var e=Object.keys(a.state.incorrect_classification),t=[],n=0;n<e.length;n++){var r=a.state.incorrect_classification[e[n]];if(null!=r&&"loading"!=r)for(var i=0;i<r.length;i++)t.push({actual:e[n],predicted:r[i].label,images:r[i].images,count:r[i].images.length})}return t},a.updatedSelectedRow=function(e){null!==e&&a.setFooterOpen(),a.setState({filter_confusion:e})},a.selectRowConfusions=function(e,t){a.setState({selected_actual_confusion:e,selected_actual_prediction:t})},a.state={accuracy_visible:!0,precision_visible:!1,f1_score_visible:!1,recall_visible:!1,sort_by:"accuracy",sort_direction:!0,incorrect_classification:a.props.spec.label_metrics.reduce(function(e,t){return e[t.label]=null,e},{}),correct_classification:[],filter_confusion:null,sort_by_confusions:"count",sort_direction_confusions:!1,selected_actual_confusion:null,selected_actual_prediction:null,footer_open:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;"MacIntel"===window.navigator.platform&&(window.webkit.messageHandlers.scriptHandler.postMessage({status:"ready"}),window.webkit.messageHandlers.scriptHandler.postMessage({status:"getCorrects"}),this.props.spec.labels.map(function(t,a){if(null==e.state.incorrect_classification[t]){var n=e.state.incorrect_classification;n[t]="loading",e.setState({incorrect_classification:n}),"MacIntel"==window.navigator.platform&&window.webkit.messageHandlers.scriptHandler.postMessage({status:"getIncorrects",label:t+""})}}),this.loadIncorrect())}},{key:"updateData",value:function(e){if("incorrects"in e){var t=e.incorrects,a=this.state.incorrect_classification;a[t.target]=t.data,this.setState({incorrect_classification:a})}"correct"in e&&this.setState({correct_classification:e.correct})}},{key:"render",value:function(){return r.a.createElement("div",{className:"TCEvaluation"},r.a.createElement(A,{accuracy:this.props.spec.accuracy,iterations:this.props.spec.max_iterations,precision:this.props.spec.precision,recall:this.props.spec.recall,model_type:this.props.spec.model_name,accuracy_visible:this.state.accuracy_visible,precision_visible:this.state.precision_visible,f1_score_visible:this.state.f1_score_visible,recall_visible:this.state.recall_visible,changeAccuracy:this.changeAccuracy.bind(this),changePrecision:this.changePrecision.bind(this),changeRecall:this.changeRecall.bind(this),changeF1Score:this.changeF1Score.bind(this),total_correct:this.totalCorrect(),total_num:this.totalNum()}),r.a.createElement(X,{data:this.summarySeedData(),accuracy_visible:this.state.accuracy_visible,precision_visible:this.state.precision_visible,f1_score_visible:this.state.f1_score_visible,recall_visible:this.state.recall_visible,sort_by:this.state.sort_by,sort_direction:this.state.sort_direction,updateSortDirection:this.updateSortDirection.bind(this),updateSortBy:this.updateSortBy.bind(this),filter_confusion:this.state.filter_confusion,footer_open:this.state.footer_open,row_click:this.updatedSelectedRow.bind(this)}),r.a.createElement(le,{considerations:this.createConsiderations(),filter_confusion:this.state.filter_confusion,sort_by_confusions:this.state.sort_by_confusions,sort_direction_confusions:this.state.sort_direction_confusions,row_click:this.updatedSelectedRow.bind(this),updateSortByConfusion:this.updateSortByConfusion.bind(this),selectRowConfusions:this.selectRowConfusions.bind(this),selected_actual:this.state.selected_actual_confusion,selected_prediction:this.state.selected_actual_prediction,footer_open:this.state.footer_open,updateFooterOpen:this.updateFooterOpen.bind(this)}))}}]),t}(n.Component),ue=a(62),de=a(63),me=a(87),he=a.n(me),be=a(88),fe=a.n(be),ge=a(24),ve=a.n(ge),ye=(a(220),{INTEGER:0,STRING:1});Object.freeze(ye);ye=ye;var _e=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).image_click=function(e){e.shiftKey?a.props.addToSelected(a.props.value):(a.props.removeSelected(),a.props.toggleInfiniteScroll(),a.props.updateIncrementalCurrentIndex(a.props.value))},a.renderAnnotation=function(){return a.props.type==ye.INTEGER&&Number.isInteger(a.props.annotation)?r.a.createElement("div",{className:ve.a.ImageLabel},a.props.annotation):a.props.annotation?r.a.createElement("div",{className:ve.a.ImageLabel},a.props.annotation):void 0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"resizeImage",value:function(e,t){return e/t>1?{width:"auto",height:ve.a.imgSize+"px",top:"0px",left:parseInt(-1*(e/t*ve.a.imgSize-ve.a.imgSize)/2,10)+"px"}:{width:ve.a.imgSize+"px",height:"auto",top:parseInt(-1*(t/e*ve.a.imgSize-ve.a.imgSize)/2,10)+"px",left:"0px"}}},{key:"render",value:function(){return this.props.src&&this.props.selected?r.a.createElement("div",{className:"".concat(ve.a.ImageContainer," ").concat(ve.a.realImage," ").concat(ve.a.selected),onClick:this.image_click.bind(this)},r.a.createElement("img",{src:this.props.src.src,className:"".concat(ve.a.ImageContainerSource," ").concat(ve.a.ImageContainerSourceSelected),style:this.resizeImage(this.props.src.width,this.props.src.height)}),this.renderAnnotation()):this.props.src?r.a.createElement("div",{className:"".concat(ve.a.ImageContainer," ").concat(ve.a.realImage),onClick:this.image_click.bind(this)},r.a.createElement("img",{src:this.props.src.src,className:ve.a.ImageContainerSource,style:this.resizeImage(this.props.src.width,this.props.src.height)}),this.renderAnnotation()):r.a.createElement("div",{className:"".concat(ve.a.ImageContainer)},r.a.createElement("div",{className:"".concat(ve.a.LoadingContainer)},r.a.createElement("div",{className:"".concat(ve.a.bounce1," ").concat(ve.a.bouncer)}),r.a.createElement("div",{className:"".concat(ve.a.bounce2," ").concat(ve.a.bouncer)}),r.a.createElement("div",{className:"".concat(ve.a.bounce2," ").concat(ve.a.bouncer)})))}}]),t}(n.Component),Ce=3,Ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).updateDimensions=function(){var e=Object(_.a)(Object(_.a)(a));window.requestAnimationFrame(function(){e.setState({componentHeight:e.currentComponent.current.getBoundingClientRect().height,componentWidth:e.currentComponent.current.getBoundingClientRect().width})})},a.handleScroll=function(e){if(a.state.enableScroll){var t=parseInt(ve.a.imgSize,10),n=2*parseInt(ve.a.imgMargin,10)+t,r=n*Ce,i=n*(5/3)*Ce,o=n*(1/3)*Ce,s=a.numRenderedbox();if(s.numX*(s.numY+2*Ce)+a.state.startValue<a.props.numElements&&i<a.currentComponent.current.scrollTop&&a.setState({startValue:s.numX*Ce+a.state.startValue,enableScroll:!1},function(){var e=s.numX*(s.numY+2*Ce)+this.state.startValue,t=e>this.props.numElements?this.props.numElements:e;this.props.getData(this.state.startValue,t),this.props.getAnnotations(this.state.startValue,t),this.currentComponent.current.scrollBy(0,-r),this.setState({enableScroll:!0})},Object(_.a)(Object(_.a)(a))),a.state.startValue>0&&o>a.currentComponent.current.scrollTop){var c=a.state.startValue-s.numX*Ce;a.setState({startValue:c<0?0:c,enableScroll:!1},function(){this.currentComponent.current.scrollBy(0,r);var e=s.numX*(s.numY+2*Ce)+this.state.startValue,t=e>this.props.numElements?this.props.numElements:e;this.props.getData(this.state.startValue,t),this.props.getAnnotations(this.state.startValue,t),this.setState({enableScroll:!0})},Object(_.a)(Object(_.a)(a)))}}},a.numRenderedbox=function(){var e=parseInt(ve.a.imgSize,10),t=2*parseInt(ve.a.imgMargin,10)+e;return{numX:Math.floor(a.state.componentWidth/t),numY:Math.floor(a.state.componentHeight/t)}},a.renderBoxes=function(){for(var e=[],t=a.numRenderedbox(),n=t.numX*(t.numY+2*Ce)+a.state.startValue,i=n>a.props.numElements?a.props.numElements:n,o=Object.keys(a.props.infiniteSelected),s=a.state.startValue;s<i;s++)e.push(r.a.createElement(_e,{key:"images_".concat(s),selected:o.includes(s.toString()),src:a.props.imageData[s],addToSelected:a.props.addToSelected.bind(Object(_.a)(Object(_.a)(a))),removeSelected:a.props.removeSelected.bind(Object(_.a)(Object(_.a)(a))),annotation:a.props.annotationData[s],toggleInfiniteScroll:a.props.toggleInfiniteScroll.bind(Object(_.a)(Object(_.a)(a))),updateIncrementalCurrentIndex:a.props.updateIncrementalCurrentIndex.bind(Object(_.a)(Object(_.a)(a))),type:a.props.type,value:s}));return e},a.onBackClick=function(e){e.shiftKey||a.props.removeSelected()},a.currentComponent=r.a.createRef(),a.state={componentHeight:window.innerHeight,componentWidth:window.innerWidth,startValue:0,enableScroll:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateDimensions();var e=this.numRenderedbox(),t=e.numX*(e.numY+2*Ce)+this.state.startValue,a=t>this.props.numElements?this.props.numElements:t;this.props.getData(this.state.startValue,a),this.props.getAnnotations(this.state.startValue,a),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(fe.a.InfiniteScroll," ").concat(fe.a.noselect),ref:this.currentComponent,onScroll:this.handleScroll,onClick:this.onBackClick.bind(this)},this.renderBoxes())}}]),t}(n.Component),Se=a(64),Oe=a.n(Se),we=a(65),Ie=a.n(we),je=(n.Component,a(110)),xe=a.n(je),ke=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).swapInfiniteScroll=function(){a.props.toggleInfiniteScroll(Object(_.a)(Object(_.a)(a))),a.props.removeSelected()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Oe.a.StatusBar},r.a.createElement("div",{className:Oe.a.StatusBarMetrics},"Total: ",this.props.total),r.a.createElement("div",null,r.a.createElement("img",{src:xe.a,className:Oe.a.SwapButton,onClick:this.swapInfiniteScroll.bind(this)}),r.a.createElement("div",{className:Oe.a.SwapButtonHelperText},"Hide Annotated image")))}}]),t}(n.Component),Ne=a(66),Te=a.n(Ne),Ae=a(111),Le=a.n(Ae),De=a(112),Be=a.n(De),Me=a(42),He=a.n(Me),Re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleImageLoaded=function(){a.updateDimensions()},a.updateDimensions=function(){var e=Object(_.a)(Object(_.a)(a));window.requestAnimationFrame(function(){e.setState({componentHeight:e.currentComponent.current.getBoundingClientRect().height,componentWidth:e.currentComponent.current.getBoundingClientRect().width})})},a.currentComponent=r.a.createRef(),a.state={componentHeight:window.innerHeight,componentWidth:window.innerWidth},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"resizeImage",value:function(e,t){if(e/t>this.state.componentWidth/this.state.componentHeight){var a=t/e*this.state.componentWidth,n=parseInt((this.state.componentHeight-a)/2,10);return{width:this.state.componentWidth,height:"auto",top:n,left:0}}a=e/t*this.state.componentHeight,n=parseInt((this.state.componentWidth-a)/2,10);return{width:"auto",height:this.state.componentHeight,top:0,left:n}}},{key:"render",value:function(){return this.props.src?r.a.createElement("div",{className:He.a.ImageLabeler},r.a.createElement("div",{className:He.a.Image,ref:this.currentComponent},r.a.createElement("img",{src:this.props.src.src,className:He.a.ImageSrc,onLoad:this.handleImageLoaded.bind(this),style:this.resizeImage(this.props.src.width,this.props.src.height)}))):r.a.createElement("div",{className:He.a.ImageLabeler},r.a.createElement("div",{className:"".concat(He.a.Image," ").concat(He.a.ImageShadow)},r.a.createElement("div",{className:He.a.ImageLoadingHolder},r.a.createElement("div",{className:He.a.bounce1}),r.a.createElement("div",{className:He.a.bounce2}),r.a.createElement("div",{className:He.a.bounce3}))))}}]),t}(n.Component),Fe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).decrementIndex=function(){a.props.incrementalCurrentIndex>0&&(a.props.updateIncrementalCurrentIndex(a.props.incrementalCurrentIndex-1),a.props.getData(a.props.incrementalCurrentIndex-2,a.props.incrementalCurrentIndex),a.props.getAnnotations(a.props.incrementalCurrentIndex-2,a.props.incrementalCurrentIndex))},a.incrementIndex=function(){a.props.incrementalCurrentIndex<a.props.numElements-1&&(a.props.updateIncrementalCurrentIndex(a.props.incrementalCurrentIndex+1),a.props.getData(a.props.incrementalCurrentIndex,a.props.incrementalCurrentIndex+2),a.props.getAnnotations(a.props.incrementalCurrentIndex,a.props.incrementalCurrentIndex+2))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getData(0,1)}},{key:"render",value:function(){return r.a.createElement("div",{className:Te.a.SingleImage},r.a.createElement("div",{className:Te.a.SingleImageContainer},r.a.createElement("div",{className:Te.a.LeftArrow,onClick:this.decrementIndex.bind(this)},r.a.createElement("img",{src:Le.a})),r.a.createElement(Re,{src:this.props.src}),r.a.createElement("div",{className:Te.a.RightArrow,onClick:this.incrementIndex.bind(this)},r.a.createElement("img",{src:Be.a}))))}}]),t}(n.Component),ze=a(59),Pe=a.n(ze),We=a(52),Ve=a.n(We),Ge=a(113),Xe=a(114),Je=a.n(Xe),Ue=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(Ge.a)({background:"-webkit-linear-gradient(left, #3b99fc 0%,#3b99fc "+parseInt(this.props.percent,10)+"%,#ededeb "+parseInt(this.props.percent,10)+"%,#ededeb 100%)"},"background","linear-gradient(to right, #3b99fc 0%,#3b99fc "+parseInt(this.props.percent,10)+"%,#ededeb "+parseInt(this.props.percent,10)+"%,#ededeb 100%)");return r.a.createElement("div",{style:e,className:Je.a.ProgressBar})}}]),t}(n.Component),Ye=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=100*this.props.num_annotated/this.props.num_expected,t=[Ve.a.Label];return this.props.active&&t.push(Ve.a.LabelSelected),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:Ve.a.LabelSpacer},r.a.createElement("div",{className:Ve.a.LabelNameAmount},r.a.createElement("div",{className:Ve.a.LabelName},r.a.createElement("span",{title:this.props.name},this.props.name)),r.a.createElement("div",{className:Ve.a.LabelAnnotatedAmount},r.a.createElement("span",null,this.props.num_annotated))),r.a.createElement("div",{className:Ve.a.LabelApplyButton,onClick:this.props.onClick.bind(this)},r.a.createElement("span",null,this.props.active?"":"Apply")),r.a.createElement("div",null,r.a.createElement(Ue,{percent:e}))))}}]),t}(n.Component),qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).setAnnotation=function(e){a.props.infiniteScroll?a.props.setAnnotationMass(e):a.props.setAnnotation(a.props.incrementalCurrentIndex,e)},a.checkActive=function(e){if(a.props.infiniteScroll){for(var t=Object.keys(a.props.infiniteSelected),n=0;n<t.length;n++)if(a.props.annotationData[t[n]]==e)return!0;return!1}return a.props.annotationData[a.props.incrementalCurrentIndex]==e},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:Pe.a.LabelContainer},r.a.createElement("div",{className:Pe.a.LabelHeader},"Labels"),r.a.createElement("div",{className:Pe.a.LabelButtonContainer},this.props.labels.map(function(t){return r.a.createElement(Ye,{active:e.checkActive(t.name),name:t.name,onClick:e.setAnnotation.bind(e,t.name),num_annotated:t.num_annotated,num_expected:t.num_expected})})),r.a.createElement("div",{className:Pe.a.LabelAddLabelContainer},r.a.createElement("button",{className:Pe.a.LabelAddLabel,onClick:this.props.openLabelModal.bind(this)},"+ Add New Label")))}}]),t}(n.Component),Ze=a(46),Ke=a.n(Ze),Qe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.labelInput.focus()},a.renderError=function(){return a.props.error?a.props.error:"\xa0"},a.labelInput=r.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:Ke.a.LabelModal,onClick:this.props.closeLabelModal.bind(this)},"Label Modal"),r.a.createElement("div",{className:Ke.a.modalWindow},r.a.createElement("div",{className:Ke.a.modalWindowHeader},"Add Labels"),r.a.createElement("div",{className:Ke.a.modalWindowDescription},"Add a label to annotate your data with."),r.a.createElement("div",null,r.a.createElement("div",{className:Ke.a.errorMessage},this.renderError()),r.a.createElement("input",{type:"text",className:Ke.a.modalInput,placeholder:"Annotation Label",onChange:this.props.handleEventLabelModalValue.bind(this),ref:function(t){e.labelInput=t}})),r.a.createElement("div",{className:Ke.a.buttonContainer},r.a.createElement("button",{className:Ke.a.createButton,onClick:this.props.createLabel.bind(this,this.props.LabelModalValue)},"Create"),r.a.createElement("button",{className:Ke.a.cancelButton,onClick:this.props.closeLabelModal.bind(this)},"Cancel"))))}}]),t}(n.Component),$e=a(67),et=a.n($e),tt=a(115),at=a.n(tt),nt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:et.a.ErrorBar},r.a.createElement("img",{src:at.a,className:et.a.ErrorIcon}),r.a.createElement("div",{className:et.a.ErrorMessage},this.props.message),r.a.createElement("div",{className:et.a.ErrorClose,onClick:this.props.clearError},"close"))}}]),t}(n.Component),rt=a(73),it=a.n(rt),ot=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(_.a)(Object(_.a)(a))),a.enterPressJumpRow=a.enterPressJumpRow.bind(Object(_.a)(Object(_.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"enterPressJumpRow",value:function(e){if(13==e.keyCode){var t=parseInt(this.state.value,10);this.setState({value:""}),null!=this.state.value&&(t<0||t>=this.props.numElements||isNaN(t)?this.props.setError("Input '".concat(this.state.value,"', is invalid.")):(this.props.updateIncrementalCurrentIndex(t),this.props.getData(t-1,t+1),this.props.getAnnotations(t-1,t+1),this.props.infiniteScroll&&this.props.toggleInfiniteScroll()))}}},{key:"render",value:function(){return r.a.createElement("div",{className:it.a.BottomBar},r.a.createElement("div",{className:it.a.jumpToImageContainer},r.a.createElement("input",{className:it.a.imageNumber,id:"imgNum",onChange:this.handleChange,onKeyDown:this.enterPressJumpRow,placeholder:"Jump to image",type:"text",value:this.state.value})))}}]),t}(n.Component),st=10,ct=1e3,lt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).cleanCache=function(e,t){if(Object.keys(a.state.imageData).length>ct){var n=Object.keys(a.state.imageData).sort(),r=n[0],i=n[n.length-1],o=parseInt((t-e)/2,10);if(Math.abs(o-r)>Math.abs(o-i)){for(var s=n.slice(r,r+(t-e)),c=a.state.imageData,l=0;l<s.length;l++)delete c[s[l]];a.setState({imageData:c})}else{s=n.slice(i-(t-e),i);var p=a.state.imageData;for(l=0;l<s.length;l++)delete p[s[l]];a.setState({imageData:p})}}},a.getData=function(e,t){a.cleanCache(e,t),a.getAnnotations(e,t),a.getHelper(e,t,0)},a.getAnnotations=function(e,t){a.getHelper(e,t,1)},a.getHelper=function(e,t,a){var n=de.Root.fromJSON(ue).lookupType("TuriCreate.Annotation.Specification.ClientRequest"),r={getter:{type:a,start:e,end:t}},i=n.verify(r);if(i)throw Error(i);var o=n.create(r),s=n.encode(o).finish(),c=btoa(String.fromCharCode.apply(null,s));"MacIntel"==window.navigator.platform?window.webkit.messageHandlers.scriptHandler.postMessage({status:"writeProtoBuf",message:c}):window.postMessageToNativeClient(c)},a.setAnnotationData=function(e,t){var n=a.state.annotationData;a.state.type==ye.STRING?n[e]=t.stringLabel:a.state.type==ye.INTEGER&&(n[e]=t.intLabel),a.setState({annotationData:n})},a.setImageData=function(e,t,n,r){var i=a.state.imageData;i[e]={src:t,width:n,height:r},a.setState({imageData:i})},a.clearError=function(){a.setState({totalError:""})},a.setError=function(e){a.setState({totalError:e})},a.updateIncrementalCurrentIndex=function(e){a.setState({incrementalCurrentIndex:e})},a.handleEventLabelModalValue=function(e){a.setState({LabelModalValue:e.target.value})},a.openLabelModal=function(){a.setState({labelCreationError:null,labelModal:!0,LabelModalValue:""})},a.closeLabelModal=function(){a.setState({labelCreationError:null,labelModal:!1,LabelModalValue:""})},a.addToSelected=function(e){var t=a.state.infiniteSelected;null!=t[parseInt(e,10)]?delete t[parseInt(e,10)]:t[parseInt(e,10)]=!0,a.setState({infiniteSelected:t})},a.removeSelected=function(){a.setState({infiniteSelected:{}})},a.createLabel=function(e){if(a.state.labels.map(function(t){return t.name!=e}).reduce(function(e,t){return e&&t},!0)){var t=a.state.labels;t.push({name:e,num_annotated:0,num_expected:st}),a.setState({labels:t,labelCreationError:null,labelModal:!1,LabelModalValue:""})}else a.setState({labelCreationError:"".concat(e," already exists as a label name")})},a.toggleInfiniteScroll=function(){a.setState({infiniteScroll:!a.state.infiniteScroll})},a.toggleHideAnnotated=function(){a.setState({hideAnnotated:!a.state.hideAnnotated})},a.setAnnotationMass=function(e){for(var t=Object.keys(a.state.infiniteSelected),n=0;n<t.length;n++)a.setAnnotation(parseInt(t[n],10),e)},a.setAnnotation=function(e,t){var n=a.state.annotationData,r=a.state.labels,i=n[e];if(i!=t){if(null!=i)for(var o=0;o<r.length;o++){var s;if(a.state.labels[o].name==i)(s=r[o]).num_annotated-=1,r[o]=s;if(a.state.labels[o].name==t)(s=r[o]).num_annotated+=1,r[o]=s}a.state.type==ye.STRING?n[e]=t:a.state.type==ye.INTEGER&&(n[e]=parseInt(t,10));var c,l=de.Root.fromJSON(ue).lookupType("TuriCreate.Annotation.Specification.ClientRequest");c=a.state.type==ye.STRING?{annotations:{annotation:[{labels:[{stringLabel:t}],rowIndex:[e]}]}}:{annotations:{annotation:[{labels:[{intLabel:parseInt(t,10)}],rowIndex:[e]}]}};var p=l.verify(c);if(p)throw Error(p);var u=l.create(c),d=l.encode(u).finish(),m=btoa(String.fromCharCode.apply(null,d));"MacIntel"==window.navigator.platform?window.webkit.messageHandlers.scriptHandler.postMessage({status:"writeProtoBuf",message:m}):window.postMessageToNativeClient(m),a.setState({annotationData:n,labels:r})}},a.renderMainContent=function(){return a.state.infiniteScroll?r.a.createElement(Ee,{numElements:a.props.metadata.numExamples,hideAnnotated:a.state.hideAnnotated,incrementalCurrentIndex:a.state.incrementalCurrentIndex,updateIncrementalCurrentIndex:a.updateIncrementalCurrentIndex.bind(Object(_.a)(Object(_.a)(a))),toggleInfiniteScroll:a.toggleInfiniteScroll.bind(Object(_.a)(Object(_.a)(a))),infiniteSelected:a.state.infiniteSelected,imageData:a.state.imageData,annotationData:a.state.annotationData,getData:a.getData.bind(Object(_.a)(Object(_.a)(a))),type:a.state.type,addToSelected:a.addToSelected.bind(Object(_.a)(Object(_.a)(a))),removeSelected:a.removeSelected.bind(Object(_.a)(Object(_.a)(a))),getAnnotations:a.getAnnotations.bind(Object(_.a)(Object(_.a)(a)))}):r.a.createElement(Fe,{src:a.state.imageData[a.state.incrementalCurrentIndex],getData:a.getData.bind(Object(_.a)(Object(_.a)(a))),getAnnotations:a.getAnnotations.bind(Object(_.a)(Object(_.a)(a))),numElements:a.props.metadata.numExamples,incrementalCurrentIndex:a.state.incrementalCurrentIndex,updateIncrementalCurrentIndex:a.updateIncrementalCurrentIndex.bind(Object(_.a)(Object(_.a)(a)))})},a.renderModal=function(){if(a.state.labelModal)return r.a.createElement(Qe,{closeLabelModal:a.closeLabelModal.bind(Object(_.a)(Object(_.a)(a))),createLabel:a.createLabel.bind(Object(_.a)(Object(_.a)(a))),error:a.state.labelCreationError,LabelModalValue:a.state.LabelModalValue,handleEventLabelModalValue:a.handleEventLabelModalValue.bind(Object(_.a)(Object(_.a)(a)))})},a.renderError=function(){if(a.state.totalError)return r.a.createElement(nt,{message:a.state.totalError,clearError:a.clearError.bind(Object(_.a)(Object(_.a)(a)))})},a.state={infiniteScroll:!1,hideAnnotated:!1,labelModal:!1,totalError:"",labelCreationError:null,incrementalCurrentIndex:0,LabelModalValue:"",imageData:{},annotationData:{},infiniteSelected:{},labels:[],type:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.props.metadata.imageClassification.label;(e=t.length>0?Object.keys(t[0]).includes("stringLabel")?ye.STRING:ye.INTEGER:ye.STRING)==ye.STRING&&(t=t.filter(function(e){return""!=e.stringLabel}));var a=t.map(function(t){return{name:e==ye.INTEGER?t.intLabel:t.stringLabel,num_annotated:t.elementCount,num_expected:st}});this.setState({labels:a,type:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:he.a.Annotate},this.renderModal(),this.renderError(),r.a.createElement("div",null,r.a.createElement(ke,{total:this.props.metadata.numExamples,infiniteScroll:this.state.infiniteScroll,toggleInfiniteScroll:this.toggleInfiniteScroll.bind(this),removeSelected:this.removeSelected.bind(this),hideAnnotated:this.state.hideAnnotated,toggleHideAnnotated:this.toggleHideAnnotated.bind(this)}),this.renderMainContent(),r.a.createElement(ot,{infiniteScroll:this.state.infiniteScroll,setError:this.setError.bind(this),numElements:this.props.metadata.numExamples,toggleInfiniteScroll:this.toggleInfiniteScroll.bind(this),updateIncrementalCurrentIndex:this.updateIncrementalCurrentIndex.bind(this),getData:this.getData.bind(this),getAnnotations:this.getAnnotations.bind(this)})),r.a.createElement("div",{className:he.a.leftBar},r.a.createElement(qe,{labels:this.state.labels,incrementalCurrentIndex:this.state.incrementalCurrentIndex,infiniteScroll:this.state.infiniteScroll,infiniteSelected:this.state.infiniteSelected,setAnnotation:this.setAnnotation.bind(this),setAnnotationMass:this.setAnnotationMass.bind(this),openLabelModal:this.openLabelModal.bind(this),closeLabelModal:this.closeLabelModal.bind(this),annotationData:this.state.annotationData})))}}]),t}(n.Component),pt=0,ut=100;document.onkeydown=function(e){var t=e.keyCode||e.charCode;91!=t&&93!=t||(pt+=1),187==t&&pt>0&&(ut+=10,document.body.style.zoom=ut+"%"),189==t&&pt>0&&ut>10&&(ut-=10,document.body.style.zoom=ut+"%")},document.onkeyup=function(e){var t=e.keyCode||e.charCode;91!=t&&93!=t||(pt-=1)};var dt=Object.freeze({table:1,vega:2,summary:3,annotate:4,evaluate:5});window.flex_type_enum=Object.freeze({integer:0,float:1,string:2,vector:3,list:4,dict:5,datetime:6,undefined:7,image:8,nd_vector:9});var mt=null,ht=null;window.setSpec=function(e){switch(document.getElementById("loading_container").style.display="block",document.getElementById("table_vis").style.display="none",document.getElementById("vega_vis").style.display="none",document.getElementById("annotate_viz").style.display="none",mt=null,ht=null,e.type){case"vega":document.getElementById("loading_container").style.display="none",document.getElementById("vega_vis").style.display="block",mt=o.a.render(r.a.createElement(h,{vega_spec:e.data}),document.getElementById("vega_vis")),ht=dt.vega;break;case"table":document.getElementById("table_vis").style.display="block",mt=o.a.render(r.a.createElement(y,{table_spec:e.data}),document.getElementById("table_vis")),ht=dt.table;break;case"summary":ht=dt.summary;break;case"evaluate":document.getElementById("loading_container").style.display="none",document.getElementById("evaluation_vis").style.display="block",mt=o.a.render(r.a.createElement(pe,{spec:e.data}),document.getElementById("evaluation_vis")),ht=dt.evaluate}},window.setProtoMessage=function(e){document.getElementById("loading_container").style.display="none",document.getElementById("annotate_viz").style.display="block";var t=de.Root.fromJSON(ue).lookupType("TuriCreate.Annotation.Specification.Parcel"),a=Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)}),n=t.decode(a);if(n.hasOwnProperty("metadata"))mt=o.a.render(r.a.createElement(lt,{metadata:n.metadata}),document.getElementById("annotate_viz")),ht=dt.annotate;else if(n.hasOwnProperty("data"))for(var i=0;i<n.data.data.length;i++){var s=n.data.data[i].rowIndex,c=n.data.data[i].images[0].type,l=n.data.data[i].images[0].imgData,p=n.data.data[i].images[0].width,u=n.data.data[i].images[0].height,d="data:image/"+c+";base64,"+l;mt.setImageData(s,d,p,u)}else if(n.hasOwnProperty("annotations"))for(i=0;i<n.annotations.annotation.length;i++){var m=n.annotations.annotation[i].rowIndex[0],h=n.annotations.annotation[i].labels[0];mt.setAnnotationData(m,h)}},window.updateData=function(e){switch(ht){case dt.table:case dt.summary:case dt.vega:case dt.evaluate:document.getElementById("loading_container").style.display="none",mt.updateData(e);break;default:console.log("default")}},window.getSpec=function(){switch(ht){case dt.summary:case dt.vega:return mt.getSpec();default:return""}},window.getData=function(){switch(ht){case dt.summary:case dt.vega:return mt.getData();default:return""}},window.setImageData=function(e){switch(ht){case dt.table:return mt.setImageData(e);default:return""}},window.setAccordionData=function(e){switch(ht){case dt.table:return mt.setAccordionData(e);default:return""}},window.export_png=function(){switch(ht){case dt.summary:case dt.vega:return mt.exportPNG();default:return""}},window.handleInput=function(e){var t,a=e;null!=a.table_spec&&((t={}).data=a.table_spec,t.type="table",window.setSpec(t));null!=a.vega_spec&&((t={}).data=a.vega_spec,t.type="vega",window.setSpec(t));(null!=a.data_spec&&window.updateData(a.data_spec),null!=a.image_spec)&&((t={}).data=a.image_spec,window.setImageData(t));null!=a.accordion_spec&&((t={}).data=a.accordion_spec,window.setAccordionData(t))},window.addEventListener("contextmenu",function(e){return e.preventDefault()})}]),[[116,2,1]]]);
//# sourceMappingURL=main.5467166b.chunk.js.map